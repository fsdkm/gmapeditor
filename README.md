# gmapeditor
Map editor for 2D games.
	Программа GMapEditor может быть использована для создания и редактирования 
файлов - комнат(уровней) к различным 2D играм.
	Не является коммерческим продуктом и написана для решения собственных задач и
в познавательных целях. В связи с чем может быть изменина, дополнина, как вам угодно. 
	Автор не несёт ответсвенности за некорректно работающий код и тому подобное...
	Для написания использовалось свободное кросплатформенное програмное обеспечение 
IDE CodeTyphon (https://www.pilotlogic.com).

Структура основного каталога программы:

/blocks - каталог, где располагаются картинки элементов;
/rooms - каталог по умолчанию, куда сохраняются редактируемые файлы с расширением *.srm;
 init.cfg - файл с настройками программы;
 log.txt - файл создаётся в случае не корректной работы программы;
 manual.txt - данный файл;
 GMapEdit - исполняемый файл приложения;

[Каталог /blocks] 

	Каталог содержит подкаталоги, имена которых являются названиями вкладок, где располагаются 
картинки блоков. 
	Для добавления или удаления новой вкладки достаточно создать/удалить соответсвующий каталог.
	В подкаталогах находятся файлы картинок с расширением *.png, а так же файл description.json, 
который содержит описание блоков.
	Описание каждого блока состоит из:
	1. Названия, которое будет отображаться под картинкой, 
	2. Названия файла самой картинки,
	3. Идентификатора, определяющего назначение блока. 

	Для создания нового блока необходимо добавить картинку в соответствующий каталог и 
прописать в файле description.json. 

[Файл init.cfg]

	Файл содержит следующие секции и переменные:

[FORMAT]   - определяет формат комнаты(уровня)
StartTag=R - стартовый символ с которого начинается файл *.srm;
Version=1  - версия формата сохраняемого файла;
Cols=10	   - количество колонок на карте уровня;
Rows=10    - количество строк на карте уровня;

	Если количество строк или столбцов в файле *.srm не соответствует заданному значению 
в файле init.cfg, то в редакторе файл отображается в виде пустого квадрата. Подробности
необходимо смотреть в файле log.txt

[PATHS]    - в данной секции сохраняются пути (не для редактирования)
PathRooms=rooms
LastRoom=rooms/room_1.srm

[ICOSIZE]  - здесь определяются в пикселах размеры иконок отображаемых слева комнат(уровней)
WidthImgRoom=200
HeightImgRoom=160

Клавиши управления:

<Space> - добавить блок
<Shift> + <Space> - удалить блок

Формат сохраняемого файла *.srm:

	1-й байт - Символ начала 'R', обозначающий комнату;
	2-й байт - Номер версии формата комнаты;
	3-й байт - Количество колонок;
	4-й байт - Количество строк;
	5-й байт - Номер комнаты;
	6-й байт - Номер комнаты слева;
	7-й байт - Номер комнаты справа;
	8-й байт - Номер комнаты сверху;
	9-й байт - Номер комнаты снизу;
	10 - n байт - Идентификаторы определяющие содержимое комнаты

	Номена комнат(уровней) представлены одним байтом в связи с чем, 
один проект может содержать не более 255 уровней. 

Идентификаторы принятые по умолчанию:

	1 - 95 - ландшафт;
	96 - 127 - активные объекты;
	128 - 159 - сюрпризы/улучшения;
	160 - 169 - ключи;
	170 - 179 - замки;
	180 - 189 - двери;
	192 - 255 - предметы;

0 - пустота, где может быть свободное перемещение;

	Идентификаторы могут быть любыми в диапазоне от 1 до 255
(определяются в файле description.json).
